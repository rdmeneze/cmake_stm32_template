# environment variables for CI/CD

This file documents the variables defined in `.env.ci` for the CI/CD pipeline.

## ARM Toolchain Configuration

### `ARM_GCC_TOOLCHAIN_PATH=/opt/arm-toolchain`
- **Description**: Directory where the ARM GCC toolchain will be installed
- **Used in**: Firmware build jobs
- **Cache**: Yes, to avoid repetitive downloads

### `ARM_TOOLCHAIN_VERSION=14.2.rel1`
- **Description**: Version of the ARM GCC toolchain to be used
- **Format**: Official ARM version (e.g., 14.2.rel1, 13.3.rel1)
- **URL**: https://developer.arm.com/downloads/-/arm-gnu-toolchain-downloads

## Build Configuration

### `CMAKE_BUILD_CACHE=/tmp/cmake-cache`
- **Description**: Directory for CMake cache
- **Purpose**: Speed up repeated CMake configuration
- **Cleanup**: Automatic by the runner

### `BUILD_OUTPUT_DIR=build`
- **Description**: Directory for firmware build output
- **Contents**: Binaries (.bin, .hex), maps (.map), executable
- **Structure**: `build/stm32l432_firmware`, `build/firmware.bin`, etc.

### `CCACHE_DIR=/tmp/ccache`
- **Description**: Directory for compilation cache (ccache)
- **Benefit**: Speeds up recompilation of unchanged files
- **Size**: Limited to 1GB by default

## Test Configuration

### `TEST_TIMEOUT=300`
- **Description**: Timeout in seconds for test execution
- **Value**: 300 seconds (5 minutes)
- **Application**: Unit tests with Google Test

### `COVERAGE_THRESHOLD=80`
- **Description**: Minimum code coverage threshold (%)
- **Value**: 80% (recommended for serious projects)
- **Tool**: lcov/gcovr

## Security Configuration

### `SCAN_TIMEOUT=600`
- **Description**: Timeout in seconds for security scans
- **Value**: 600 seconds (10 minutes)
- **Application**: Cppcheck, vulnerability scanning

## Artifact Configuration

### `ARTIFACT_RETENTION_DAYS=30`
- **Description**: Days to retain build artifacts
- **Application**: Firmware binaries, test results
- **Storage**: GitHub Actions storage

### `RELEASE_RETENTION_DAYS=90`
- **Description**: Days to retain release packages
- **Application**: Final release packages
- **Importance**: Longer retention for important releases

---

## How to Use

### In CI/CD Pipeline:
```yaml
- name: Load .env.ci
  run: |
    if [ -f .env.ci ]; then
      export $(cat .env.ci | xargs)
    fi
```

### For Local Development:
```bash
# Load variables locally
export $(cat .env.ci | xargs)

# Verify loaded variables
echo $ARM_GCC_TOOLCHAIN_PATH
echo $BUILD_OUTPUT_DIR
```

### Change configuration:
1. Edit `.env.ci` with new values
2. Commit and push
3. Pipeline will use new values automatically

## Important

- **Format**: Only `KEY=value` (no spaces around the =)
- **Comments**: Not supported in the .env file
- **Documentation**: Use this file to document the variables
- **Validation**: Pipeline validates if essential variables are defined
